# Паттерн прокси

Может строиться на наследовании/имплементировании

1) Создается класс, который наследует исходный и переопределяет его логику, добавляю post/pre условия/методы CjLib
2) Создается имплементация исходного интерфейса Dynamic proxy

Spring Aop при создании аспекта над объектом может работать в 2 вариантах. Если у объета есть интерфейсы, то работает через Dynamic proxy, иначе - через CjLib


Механизмы проксирования в Spring:
 - Dynamic proxy
 - CGLIB

Если целевой объект, который нужно проксировать, реализует хотя бы один интерфейс, будет использоваться динамический прокси JDK, иначе - CJLIB.

Минусы CJLIB:
 - нельзя проксировать final методы, тк их нельзя переопределить
 - конструктор проксируемого объекта будет вызываться дважды.
Для каждого проксируемого экземпляра создаются два объекта: фактический проксируемый объект и экземпляр подкласса, реализующего advice.